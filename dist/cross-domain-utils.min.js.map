{"version":3,"sources":["webpack:///cross-domain-utils.min.js","webpack:///webpack/bootstrap 4fd4aaae6d6da663c31a","webpack:///./node_modules/cross-domain-safe-weakmap/src/index.js","webpack:///./node_modules/cross-domain-safe-weakmap/src/interface.js","webpack:///./node_modules/cross-domain-safe-weakmap/src/native.js","webpack:///./node_modules/cross-domain-safe-weakmap/src/util.js","webpack:///./node_modules/cross-domain-safe-weakmap/src/weakmap.js","webpack:///./node_modules/zalgo-promise/src/exceptions.js","webpack:///./node_modules/zalgo-promise/src/index.js","webpack:///./node_modules/zalgo-promise/src/promise.js","webpack:///./node_modules/zalgo-promise/src/utils.js","webpack:///./src/index.js","webpack:///./src/util.js"],"names":["crossDomainUtils","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","./node_modules/cross-domain-safe-weakmap/src/index.js","value","_interface","keys","forEach","key","INTERFACE","obj","newObj","./node_modules/cross-domain-safe-weakmap/src/interface.js","_weakmap","CrossDomainSafeWeakMap","./node_modules/cross-domain-safe-weakmap/src/native.js","hasNativeWeakMap","window","WeakMap","freeze","testWeakMap","testKey","set","err","./node_modules/cross-domain-safe-weakmap/src/util.js","isWindow","self","isClosedWindow","closed","message","./node_modules/cross-domain-safe-weakmap/src/weakmap.js","_classCallCheck","instance","Constructor","TypeError","undefined","_createClass","defineProperties","target","props","length","descriptor","writable","protoProps","staticProps","_util","_native","counter","Date","now","this","Math","random","weakmap","values","splice","Error","_cleanupClosedWindows","index","indexOf","push","entry","has","./node_modules/zalgo-promise/src/exceptions.js","dispatchPossiblyUnhandledError","dispatchedErrors","setTimeout","j","possiblyUnhandledPromiseHandlers","onPossiblyUnhandledException","handler","cancel","./node_modules/zalgo-promise/src/index.js","_promise","ZalgoPromise","./node_modules/zalgo-promise/src/promise.js","_utils","_exceptions","_this","resolved","rejected","errorHandled","handlers","result","error","isAsync","res","resolve","reject","isPromise","dispatch","_this2","toString","_this3","dispatching","_handlers$i","onSuccess","onError","promise","then","Promise","promises","count","results","method","context","args","apply","delay","all","./node_modules/zalgo-promise/src/utils.js","item","Window","constructor","Function","./src/index.js","getActualDomain","win","location","protocol","CONSTANTS","FILE_PROTOCOL","host","getDomain","domain","mockDomain","MOCK_PROTOCOL","isBlankDomain","href","isActuallySameDomain","desc","getOwnPropertyDescriptor","isSameDomain","getParent","parent","getOpener","opener","getParents","isAncestorParent","child","childParent","getFrames","frames","len","frame","getAllChildFrames","_iterator","_isArray","Array","isArray","_i2","Symbol","iterator","_ref","next","done","_iterator2","_isArray2","_i3","_ref2","childFrame","getAllFramesInWindow","_iterator3","_isArray3","_i4","_ref3","_iterator4","_isArray4","_i5","_ref4","getTop","top","_iterator5","_isArray5","_i6","_ref5","isTop","linkFrameWindow","contentWindow","iframeWindows","isWindowClosed","allowMock","arguments","mockclosed","parentNode","doc","ownerDocument","body","contains","getUserAgent","navigator","mockUserAgent","userAgent","getFrameByName","winFrames","_iterator6","_isArray6","_i7","_ref6","findChildFrameByName","_iterator7","_isArray7","_i8","_ref7","namedFrame","findFrameByName","isParent","frameParent","_iterator8","_isArray8","_i9","_ref8","isOpener","getAncestor","getAncestors","ancestor","isAncestor","actualParent","_iterator9","_isArray9","_i10","_ref9","isPopup","Boolean","isIframe","isFullpage","anyMatch","collection1","collection2","_iterator10","_isArray10","_i11","_ref10","item1","_iterator11","_isArray11","_i12","_ref11","getDistanceFromTop","distance","getNthParent","getNthParentFromTop","isSameTopWindow","win1","win2","top1","top2","allFrames1","allFrames2","opener1","opener2","matchDomain","pattern","origin","WILDCARD","isRegex","match","JSON","stringify","some","subpattern","getDomainFromUrl","url","split","slice","join","onCloseWindow","closeWindowPromises","_src2","check","_src","./src/util.js"],"mappings":"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1B+J,qBAAoBrP,IAAI+F,IAAKnB,QAE7B,OAAOA,SX2KX5G,OAAOC,eAAeZ,QAAS,cAC3ByB,OAAO,GAEXzB,SW35BgByI,+BX45BhBzI,SWj4BgBgJ,mBXk4BhBhJ,SWr3BgBoJ,2BXs3BhBpJ,SWt2BgBsJ,yCXu2BhBtJ,SW10BgByJ,yBX20BhBzJ,SWpzBgB0J,mBXqzBhB1J,SWtyBgB4J,mBXuyBhB5J,SWnxBgB8J,qBXoxBhB9J,SWlwBgB+J,iCXmwBhB/J,SWhvBgBkK,mBXivBhBlK,SWprBgBsK,mCXqrBhBtK,SWtqBgBsL,yCXuqBhBtL,SWlpBgB+L,aXmpBhB/L,SWlmBgBqM,WXmmBhBrM,SW7lBgBsM,+BX8lBhBtM,SWplBgByM,6BXqlBhBzM,SW9fgBkN,yBX+fhBlN,SWzfgBsN,6BX0fhBtN,SW3dgB4N,yCX4dhB5N,SW3cgBkO,+BX4chBlO,SW/bgBmO,iBXgchBnO,SW/agByO,iBXgbhBzO,SW3agB0O,uBX4ahB1O,SW5ZgB2O,yBX6ZhB3O,SW5YgB6O,qBX6YhB7O,SWhXgBmP,eXiXhBnP,SW7WgBqP,iBX8WhBrP,SW1WgBsP,qBX2WhBtP,SW5VgBmQ,qCX6VhBnQ,SWhVgBqQ,yBXiVhBrQ,SW1UgBsQ,uCX2UhBtQ,SWvUgBuQ,+BXwUhBvQ,SWpSgBgR,uBXqShBhR,SWvPgB0R,iCXwPhB1R,SWvOgB+R,2BAhuBhB,IAAAI,MAAAtS,oBAAA,yDACAoS,MAAApS,oBAAA,6CACAqE,MAAArE,oBAAA,iBAEMgJ,WACFM,cAAe,QACfL,cAAe,QACfqI,SAAU,KA6UV3E,cAAkD,GAAA2F,MAAA5P,QA0YlDyP,oBAAyD,GAAAG,MAAA5P,SXsnCvD6P,gBACA,SAAUnS,OAAQD,QAASH,qBAEjC,YYv1DO,SAASuR,SAAQhJ,MACpB,MAAgD,oBAAzCzH,OAAOS,UAAU6F,SAAS7G,KAAKgI,MZy1D1CzH,OAAOC,eAAeZ,QAAS,cAC3ByB,OAAO,GAEXzB,SY71DgBoR","file":"cross-domain-utils.min.js","sourcesContent":["var crossDomainUtils =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./node_modules/cross-domain-safe-weakmap/src/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _interface = __webpack_require__(\"./node_modules/cross-domain-safe-weakmap/src/interface.js\");\n\nObject.keys(_interface).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _interface[key];\n    }\n  });\n});\n\nvar INTERFACE = _interopRequireWildcard(_interface);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nexports['default'] = INTERFACE;\n\n/***/ }),\n\n/***/ \"./node_modules/cross-domain-safe-weakmap/src/interface.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _weakmap = __webpack_require__(\"./node_modules/cross-domain-safe-weakmap/src/weakmap.js\");\n\nObject.defineProperty(exports, 'WeakMap', {\n  enumerable: true,\n  get: function get() {\n    return _weakmap.CrossDomainSafeWeakMap;\n  }\n});\n\n/***/ }),\n\n/***/ \"./node_modules/cross-domain-safe-weakmap/src/native.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasNativeWeakMap = hasNativeWeakMap;\nfunction hasNativeWeakMap() {\n\n    if (!window.WeakMap) {\n        return false;\n    }\n\n    if (!window.Object.freeze) {\n        return false;\n    }\n\n    try {\n\n        var testWeakMap = new window.WeakMap();\n        var testKey = {};\n        var testValue = '__testvalue__';\n\n        window.Object.freeze(testKey);\n\n        testWeakMap.set(testKey, testValue);\n\n        if (testWeakMap.get(testKey) === testValue) {\n            return true;\n        }\n\n        return false;\n    } catch (err) {\n\n        return false;\n    }\n}\n\n/***/ }),\n\n/***/ \"./node_modules/cross-domain-safe-weakmap/src/util.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isWindow = isWindow;\nexports.isClosedWindow = isClosedWindow;\nfunction isWindow(obj) {\n\n    try {\n        if (obj && obj.self === obj) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nfunction isClosedWindow(obj) {\n\n    try {\n        if (obj && obj !== window && obj.closed) {\n            return true;\n        }\n    } catch (err) {\n\n        if (err && err.message === 'Call was rejected by callee.\\r\\n') {\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n/***/ }),\n\n/***/ \"./node_modules/cross-domain-safe-weakmap/src/weakmap.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.CrossDomainSafeWeakMap = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _util = __webpack_require__(\"./node_modules/cross-domain-safe-weakmap/src/util.js\");\n\nvar _native = __webpack_require__(\"./node_modules/cross-domain-safe-weakmap/src/native.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defineProperty = Object.defineProperty;\nvar counter = Date.now() % 1e9;\n\nvar CrossDomainSafeWeakMap = exports.CrossDomainSafeWeakMap = function () {\n    function CrossDomainSafeWeakMap() {\n        _classCallCheck(this, CrossDomainSafeWeakMap);\n\n        counter += 1;\n        this.name = '__weakmap_' + (Math.random() * 1e9 >>> 0) + '__' + counter; // eslint-disable-line\n\n        if ((0, _native.hasNativeWeakMap)()) {\n            try {\n                this.weakmap = new window.WeakMap();\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this.keys = [];\n        this.values = [];\n    }\n\n    _createClass(CrossDomainSafeWeakMap, [{\n        key: '_cleanupClosedWindows',\n        value: function _cleanupClosedWindows() {\n\n            var weakmap = this.weakmap;\n            var keys = this.keys;\n\n            for (var i = 0; i < keys.length; i++) {\n                var value = keys[i];\n\n                if ((0, _util.isClosedWindow)(value)) {\n\n                    if (weakmap) {\n                        try {\n                            weakmap['delete'](value);\n                        } catch (err) {\n                            // pass\n                        }\n                    }\n\n                    keys.splice(i, 1);\n                    this.values.splice(i, 1);\n\n                    i -= 1;\n                }\n            }\n        }\n    }, {\n        key: 'set',\n        value: function set(key, value) {\n\n            if (!key) {\n                throw new Error('WeakMap expected key');\n            }\n\n            var weakmap = this.weakmap;\n\n            if (weakmap) {\n                try {\n                    weakmap.set(key, value);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n            }\n\n            if ((0, _util.isWindow)(key)) {\n\n                this._cleanupClosedWindows();\n\n                var keys = this.keys;\n                var values = this.values;\n                var index = keys.indexOf(key);\n\n                if (index === -1) {\n                    keys.push(key);\n                    values.push(value);\n                } else {\n                    values[index] = value;\n                }\n            } else {\n\n                var name = this.name;\n                var entry = key[name];\n\n                if (entry && entry[0] === key) {\n                    entry[1] = value;\n                } else {\n                    defineProperty(key, name, {\n                        value: [key, value],\n                        writable: true\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'get',\n        value: function get(key) {\n\n            if (!key) {\n                throw new Error('WeakMap expected key');\n            }\n\n            var weakmap = this.weakmap;\n\n            if (weakmap) {\n                try {\n                    if (weakmap.has(key)) {\n                        return weakmap.get(key);\n                    }\n                } catch (err) {\n                    delete this.weakmap;\n                }\n            }\n\n            if ((0, _util.isWindow)(key)) {\n\n                var keys = this.keys;\n                var index = keys.indexOf(key);\n\n                if (index === -1) {\n                    return;\n                }\n\n                return this.values[index];\n            } else {\n\n                var entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return entry[1];\n                }\n            }\n        }\n    }, {\n        key: 'delete',\n        value: function _delete(key) {\n\n            if (!key) {\n                throw new Error('WeakMap expected key');\n            }\n\n            var weakmap = this.weakmap;\n\n            if (weakmap) {\n                try {\n                    weakmap['delete'](key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n            }\n\n            if ((0, _util.isWindow)(key)) {\n\n                this._cleanupClosedWindows();\n\n                var keys = this.keys;\n                var index = keys.indexOf(key);\n\n                if (index !== -1) {\n                    keys.splice(index, 1);\n                    this.values.splice(index, 1);\n                }\n            } else {\n\n                var entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    entry[0] = entry[1] = undefined;\n                }\n            }\n        }\n    }, {\n        key: 'has',\n        value: function has(key) {\n\n            if (!key) {\n                throw new Error('WeakMap expected key');\n            }\n\n            var weakmap = this.weakmap;\n\n            if (weakmap) {\n                try {\n                    return weakmap.has(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n            }\n\n            if ((0, _util.isWindow)(key)) {\n\n                this._cleanupClosedWindows();\n\n                return this.keys.indexOf(key) !== -1;\n            } else {\n\n                var entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return true;\n                }\n\n                return false;\n            }\n        }\n    }]);\n\n    return CrossDomainSafeWeakMap;\n}();\n\n/***/ }),\n\n/***/ \"./node_modules/zalgo-promise/src/exceptions.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.dispatchPossiblyUnhandledError = dispatchPossiblyUnhandledError;\nexports.onPossiblyUnhandledException = onPossiblyUnhandledException;\n\nvar possiblyUnhandledPromiseHandlers = [];\nvar dispatchedErrors = [];\n\nfunction dispatchPossiblyUnhandledError(err) {\n\n    if (dispatchedErrors.indexOf(err) !== -1) {\n        return;\n    }\n\n    dispatchedErrors.push(err);\n\n    setTimeout(function () {\n        throw err;\n    }, 1);\n\n    for (var j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n        possiblyUnhandledPromiseHandlers[j](err);\n    }\n}\n\nfunction onPossiblyUnhandledException(handler) {\n    possiblyUnhandledPromiseHandlers.push(handler);\n\n    return {\n        cancel: function cancel() {\n            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n        }\n    };\n}\n\n/***/ }),\n\n/***/ \"./node_modules/zalgo-promise/src/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(\"./node_modules/zalgo-promise/src/promise.js\");\n\nObject.defineProperty(exports, 'ZalgoPromise', {\n  enumerable: true,\n  get: function get() {\n    return _promise.ZalgoPromise;\n  }\n});\n\n/***/ }),\n\n/***/ \"./node_modules/zalgo-promise/src/promise.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ZalgoPromise = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(\"./node_modules/zalgo-promise/src/utils.js\");\n\nvar _exceptions = __webpack_require__(\"./node_modules/zalgo-promise/src/exceptions.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ZalgoPromise = function () {\n    function ZalgoPromise(handler) {\n        var _this = this;\n\n        _classCallCheck(this, ZalgoPromise);\n\n        this.resolved = false;\n        this.rejected = false;\n        this.errorHandled = false;\n\n        this.handlers = [];\n\n        if (handler) {\n\n            var _result = void 0;\n            var _error = void 0;\n            var resolved = false;\n            var rejected = false;\n            var isAsync = false;\n\n            try {\n                handler(function (res) {\n                    if (isAsync) {\n                        _this.resolve(res);\n                    } else {\n                        resolved = true;\n                        _result = res;\n                    }\n                }, function (err) {\n                    if (isAsync) {\n                        _this.reject(err);\n                    } else {\n                        rejected = true;\n                        _error = err;\n                    }\n                });\n            } catch (err) {\n                this.reject(err);\n                return;\n            }\n\n            isAsync = true;\n\n            if (resolved) {\n                // $FlowFixMe\n                this.resolve(_result);\n            } else if (rejected) {\n                this.reject(_error);\n            }\n        }\n    }\n\n    _createClass(ZalgoPromise, [{\n        key: 'resolve',\n        value: function resolve(result) {\n            if (this.resolved || this.rejected) {\n                return this;\n            }\n\n            if ((0, _utils.isPromise)(result)) {\n                throw new Error('Can not resolve promise with another promise');\n            }\n\n            this.resolved = true;\n            this.value = result;\n            this.dispatch();\n\n            return this;\n        }\n    }, {\n        key: 'reject',\n        value: function reject(error) {\n            var _this2 = this;\n\n            if (this.resolved || this.rejected) {\n                return this;\n            }\n\n            if ((0, _utils.isPromise)(error)) {\n                throw new Error('Can not reject promise with another promise');\n            }\n\n            if (!error) {\n                var _err = error && typeof error.toString === 'function' ? error.toString() : Object.prototype.toString.call(error);\n                error = new Error('Expected reject to be called with Error, got ' + _err);\n            }\n\n            this.rejected = true;\n            this.error = error;\n\n            if (!this.errorHandled) {\n                setTimeout(function () {\n                    if (!_this2.errorHandled) {\n                        (0, _exceptions.dispatchPossiblyUnhandledError)(error);\n                    }\n                }, 1);\n            }\n\n            this.dispatch();\n\n            return this;\n        }\n    }, {\n        key: 'asyncReject',\n        value: function asyncReject(error) {\n            this.errorHandled = true;\n            this.reject(error);\n        }\n    }, {\n        key: 'dispatch',\n        value: function dispatch() {\n            var _this3 = this;\n\n            var dispatching = this.dispatching,\n                resolved = this.resolved,\n                rejected = this.rejected,\n                handlers = this.handlers;\n\n\n            if (dispatching) {\n                return;\n            }\n\n            if (!resolved && !rejected) {\n                return;\n            }\n\n            this.dispatching = true;\n\n            var _loop = function _loop(i) {\n                var _handlers$i = handlers[i],\n                    onSuccess = _handlers$i.onSuccess,\n                    onError = _handlers$i.onError,\n                    promise = _handlers$i.promise;\n\n\n                var result = void 0;\n\n                if (resolved) {\n\n                    try {\n                        result = onSuccess ? onSuccess(_this3.value) : _this3.value;\n                    } catch (err) {\n                        promise.reject(err);\n                        return 'continue';\n                    }\n                } else if (rejected) {\n\n                    if (!onError) {\n                        promise.reject(_this3.error);\n                        return 'continue';\n                    }\n\n                    try {\n                        result = onError(_this3.error);\n                    } catch (err) {\n                        promise.reject(err);\n                        return 'continue';\n                    }\n                }\n\n                if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n\n                    if (result.resolved) {\n                        promise.resolve(result.value);\n                    } else {\n                        promise.reject(result.error);\n                    }\n\n                    result.errorHandled = true;\n                } else if ((0, _utils.isPromise)(result)) {\n\n                    // $FlowFixMe\n                    result.then(function (res) {\n                        promise.resolve(res);\n                    }, function (err) {\n                        promise.reject(err);\n                    });\n                } else {\n\n                    promise.resolve(result);\n                }\n            };\n\n            for (var i = 0; i < handlers.length; i++) {\n                var _ret = _loop(i);\n\n                if (_ret === 'continue') continue;\n            }\n\n            handlers.length = 0;\n            this.dispatching = false;\n        }\n    }, {\n        key: 'then',\n        value: function then(onSuccess, onError) {\n\n            if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n                throw new Error('Promise.then expected a function for success handler');\n            }\n\n            if (onError && typeof onError !== 'function' && !onError.call) {\n                throw new Error('Promise.then expected a function for error handler');\n            }\n\n            var promise = new ZalgoPromise();\n\n            this.handlers.push({\n                promise: promise,\n                onSuccess: onSuccess,\n                onError: onError\n            });\n\n            this.errorHandled = true;\n\n            this.dispatch();\n\n            return promise;\n        }\n    }, {\n        key: 'catch',\n        value: function _catch(onError) {\n            return this.then(undefined, onError);\n        }\n    }, {\n        key: 'finally',\n        value: function _finally(handler) {\n            return this.then(function (result) {\n                return ZalgoPromise['try'](handler).then(function () {\n                    return result;\n                });\n            }, function (err) {\n                return ZalgoPromise['try'](handler).then(function () {\n                    throw err;\n                });\n            });\n        }\n    }, {\n        key: 'toPromise',\n        value: function toPromise() {\n            if (!window.Promise) {\n                throw new Error('Could not find window.Promise');\n            }\n            return window.Promise.resolve(this);\n        }\n    }], [{\n        key: 'resolve',\n        value: function resolve(value) {\n\n            if (value instanceof ZalgoPromise || (0, _utils.isPromise)(value)) {\n                // $FlowFixMe\n                return value;\n            }\n\n            return new ZalgoPromise().resolve(value);\n        }\n    }, {\n        key: 'reject',\n        value: function reject(error) {\n            return new ZalgoPromise().reject(error);\n        }\n    }, {\n        key: 'all',\n        value: function all(promises) {\n\n            var promise = new ZalgoPromise();\n            var count = promises.length;\n            var results = [];\n\n            if (!count) {\n                promise.resolve(results);\n                return promise;\n            }\n\n            var _loop2 = function _loop2(i) {\n                ZalgoPromise.resolve(promises[i]).then(function (result) {\n                    // $FlowFixMe\n                    results[i] = result;\n                    count -= 1;\n                    if (count === 0) {\n                        promise.resolve(results);\n                    }\n                }, function (err) {\n                    promise.reject(err);\n                });\n            };\n\n            for (var i = 0; i < promises.length; i++) {\n                _loop2(i);\n            }\n\n            return promise;\n        }\n    }, {\n        key: 'onPossiblyUnhandledException',\n        value: function onPossiblyUnhandledException(handler) {\n            return (0, _exceptions.onPossiblyUnhandledException)(handler);\n        }\n    }, {\n        key: 'try',\n        value: function _try(method, context, args) {\n\n            var result = void 0;\n\n            try {\n                result = method.apply(context, args || []);\n            } catch (err) {\n                return ZalgoPromise.reject(err);\n            }\n\n            return ZalgoPromise.resolve(result);\n        }\n    }, {\n        key: 'delay',\n        value: function delay(_delay) {\n            return new ZalgoPromise(function (resolve) {\n                setTimeout(resolve, _delay);\n            });\n        }\n    }, {\n        key: 'hash',\n        value: function hash(obj) {\n\n            var results = {};\n            var promises = [];\n\n            var _loop3 = function _loop3(key) {\n                if (obj.hasOwnProperty(key)) {\n                    promises.push(ZalgoPromise.resolve(obj[key]).then(function (result) {\n                        results[key] = result;\n                    }));\n                }\n            };\n\n            for (var key in obj) {\n                _loop3(key);\n            }\n\n            return ZalgoPromise.all(promises).then(function () {\n                return results;\n            });\n        }\n    }]);\n\n    return ZalgoPromise;\n}();\n\nexports.ZalgoPromise = ZalgoPromise;\n\n\nvar prom = new ZalgoPromise();\n\nprom.resolve(undefined);\n\n/***/ }),\n\n/***/ \"./node_modules/zalgo-promise/src/utils.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isPromise = isPromise;\n\nvar toString = {}.toString;\n\nfunction isPromise(item) {\n    try {\n        if (!item) {\n            return false;\n        }\n\n        if (window.Window && item instanceof window.Window) {\n            return false;\n        }\n\n        if (window.constructor && item instanceof window.constructor) {\n            return false;\n        }\n\n        if (toString) {\n            var name = toString.call(item);\n\n            if (name === '[object Window]' || name === '[object global]' || name === '[object DOMWindow]') {\n                return false;\n            }\n        }\n\n        if (item && item.then instanceof Function) {\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n\n    return false;\n}\n\n/***/ }),\n\n/***/ \"./src/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getActualDomain = getActualDomain;\nexports.getDomain = getDomain;\nexports.isBlankDomain = isBlankDomain;\nexports.isActuallySameDomain = isActuallySameDomain;\nexports.isSameDomain = isSameDomain;\nexports.getParent = getParent;\nexports.getOpener = getOpener;\nexports.getParents = getParents;\nexports.isAncestorParent = isAncestorParent;\nexports.getFrames = getFrames;\nexports.getAllChildFrames = getAllChildFrames;\nexports.getAllFramesInWindow = getAllFramesInWindow;\nexports.getTop = getTop;\nexports.isTop = isTop;\nexports.linkFrameWindow = linkFrameWindow;\nexports.isWindowClosed = isWindowClosed;\nexports.getUserAgent = getUserAgent;\nexports.getFrameByName = getFrameByName;\nexports.findChildFrameByName = findChildFrameByName;\nexports.findFrameByName = findFrameByName;\nexports.isParent = isParent;\nexports.isOpener = isOpener;\nexports.getAncestor = getAncestor;\nexports.getAncestors = getAncestors;\nexports.isAncestor = isAncestor;\nexports.isPopup = isPopup;\nexports.isIframe = isIframe;\nexports.isFullpage = isFullpage;\nexports.getDistanceFromTop = getDistanceFromTop;\nexports.getNthParent = getNthParent;\nexports.getNthParentFromTop = getNthParentFromTop;\nexports.isSameTopWindow = isSameTopWindow;\nexports.matchDomain = matchDomain;\nexports.getDomainFromUrl = getDomainFromUrl;\nexports.onCloseWindow = onCloseWindow;\n\nvar _src = __webpack_require__(\"./node_modules/cross-domain-safe-weakmap/src/index.js\");\n\nvar _src2 = __webpack_require__(\"./node_modules/zalgo-promise/src/index.js\");\n\nvar _util = __webpack_require__(\"./src/util.js\");\n\nvar CONSTANTS = {\n    MOCK_PROTOCOL: 'mock:',\n    FILE_PROTOCOL: 'file:',\n    WILDCARD: '*'\n};\n\nfunction getActualDomain(win) {\n\n    var location = win.location;\n\n    if (!location) {\n        throw new Error('Can not read window location');\n    }\n\n    var protocol = location.protocol;\n\n    if (!protocol) {\n        throw new Error('Can not read window protocol');\n    }\n\n    if (protocol === CONSTANTS.FILE_PROTOCOL) {\n        return 'file://';\n    }\n\n    var host = location.host;\n\n    if (!host) {\n        throw new Error('Can not read window host');\n    }\n\n    return protocol + '//' + host;\n}\n\nfunction getDomain(win) {\n\n    win = win || window;\n\n    var domain = getActualDomain(win);\n\n    if (domain && win.mockDomain && win.mockDomain.indexOf(CONSTANTS.MOCK_PROTOCOL) === 0) {\n        return win.mockDomain;\n    }\n\n    return domain;\n}\n\nfunction isBlankDomain(win) {\n    try {\n        if (!win.location.href) {\n            return true;\n        }\n\n        if (win.location.href === 'about:blank') {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nfunction isActuallySameDomain(win) {\n\n    try {\n        var desc = Object.getOwnPropertyDescriptor(win, 'location');\n\n        if (desc && desc.enumerable === false) {\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isBlankDomain(win)) {\n            return true;\n        }\n\n        if (getActualDomain(win) === getActualDomain(window)) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nfunction isSameDomain(win) {\n\n    if (!isActuallySameDomain(win)) {\n        return false;\n    }\n\n    try {\n\n        if (isBlankDomain(win)) {\n            return true;\n        }\n\n        if (getDomain(window) === getDomain(win)) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nfunction getParent(win) {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.parent && win.parent !== win) {\n            return win.parent;\n        }\n    } catch (err) {\n        return;\n    }\n}\n\nfunction getOpener(win) {\n\n    if (!win) {\n        return;\n    }\n\n    // Make sure we're not actually an iframe which has had window.open() called on us\n    if (getParent(win)) {\n        return;\n    }\n\n    try {\n        return win.opener;\n    } catch (err) {\n        return;\n    }\n}\n\nfunction getParents(win) {\n\n    var result = [];\n\n    try {\n\n        while (win.parent !== win) {\n            result.push(win.parent);\n            win = win.parent;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return result;\n}\n\nfunction isAncestorParent(parent, child) {\n\n    if (!parent || !child) {\n        return false;\n    }\n\n    var childParent = getParent(child);\n\n    if (childParent) {\n        return childParent === parent;\n    }\n\n    if (getParents(child).indexOf(parent) !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction getFrames(win) {\n\n    var result = [];\n\n    var frames = void 0;\n\n    try {\n        frames = win.frames;\n    } catch (err) {\n        frames = win;\n    }\n\n    var len = void 0;\n\n    try {\n        len = frames.length;\n    } catch (err) {\n        // pass\n    }\n\n    if (len === 0) {\n        return result;\n    }\n\n    if (len) {\n        for (var i = 0; i < len; i++) {\n\n            var frame = void 0;\n\n            try {\n                frame = frames[i];\n            } catch (err) {\n                continue;\n            }\n\n            result.push(frame);\n        }\n\n        return result;\n    }\n\n    for (var _i = 0; _i < 100; _i++) {\n        var _frame = void 0;\n\n        try {\n            _frame = frames[_i];\n        } catch (err) {\n            return result;\n        }\n\n        if (!_frame) {\n            return result;\n        }\n\n        result.push(_frame);\n    }\n\n    return result;\n}\n\nfunction getAllChildFrames(win) {\n\n    var result = [];\n\n    for (var _iterator = getFrames(win), _isArray = Array.isArray(_iterator), _i2 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n            if (_i2 >= _iterator.length) break;\n            _ref = _iterator[_i2++];\n        } else {\n            _i2 = _iterator.next();\n            if (_i2.done) break;\n            _ref = _i2.value;\n        }\n\n        var frame = _ref;\n\n        result.push(frame);\n\n        for (var _iterator2 = getAllChildFrames(frame), _isArray2 = Array.isArray(_iterator2), _i3 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n            var _ref2;\n\n            if (_isArray2) {\n                if (_i3 >= _iterator2.length) break;\n                _ref2 = _iterator2[_i3++];\n            } else {\n                _i3 = _iterator2.next();\n                if (_i3.done) break;\n                _ref2 = _i3.value;\n            }\n\n            var childFrame = _ref2;\n\n            result.push(childFrame);\n        }\n    }\n\n    return result;\n}\n\nfunction getAllFramesInWindow(win) {\n\n    var result = getAllChildFrames(win);\n\n    result.push(win);\n\n    for (var _iterator3 = getParents(win), _isArray3 = Array.isArray(_iterator3), _i4 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n        var _ref3;\n\n        if (_isArray3) {\n            if (_i4 >= _iterator3.length) break;\n            _ref3 = _iterator3[_i4++];\n        } else {\n            _i4 = _iterator3.next();\n            if (_i4.done) break;\n            _ref3 = _i4.value;\n        }\n\n        var parent = _ref3;\n\n\n        result.push(parent);\n\n        for (var _iterator4 = getFrames(parent), _isArray4 = Array.isArray(_iterator4), _i5 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n            var _ref4;\n\n            if (_isArray4) {\n                if (_i5 >= _iterator4.length) break;\n                _ref4 = _iterator4[_i5++];\n            } else {\n                _i5 = _iterator4.next();\n                if (_i5.done) break;\n                _ref4 = _i5.value;\n            }\n\n            var frame = _ref4;\n\n\n            if (result.indexOf(frame) === -1) {\n                result.push(frame);\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction getTop(win) {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.top) {\n            return win.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    if (getParent(win) === win) {\n        return win;\n    }\n\n    try {\n        if (isAncestorParent(window, win)) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isAncestorParent(win, window)) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    for (var _iterator5 = getAllChildFrames(win), _isArray5 = Array.isArray(_iterator5), _i6 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n        var _ref5;\n\n        if (_isArray5) {\n            if (_i6 >= _iterator5.length) break;\n            _ref5 = _iterator5[_i6++];\n        } else {\n            _i6 = _iterator5.next();\n            if (_i6.done) break;\n            _ref5 = _i6.value;\n        }\n\n        var frame = _ref5;\n\n        try {\n            if (frame.top) {\n                return frame.top;\n            }\n        } catch (err) {\n            // pass\n        }\n\n        if (getParent(frame) === frame) {\n            return frame;\n        }\n    }\n}\n\nfunction isTop(win) {\n    return win === getTop(win);\n}\n\nvar iframeWindows = new _src.WeakMap();\n\nfunction linkFrameWindow(frame) {\n    if (frame && frame.contentWindow) {\n        try {\n            iframeWindows.set(frame.contentWindow, frame);\n        } catch (err) {\n            // pass\n        }\n    }\n}\n\nfunction isWindowClosed(win) {\n    var allowMock = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n\n    try {\n        if (win === window) {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (!win) {\n            return true;\n        }\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (win.closed) {\n            return true;\n        }\n    } catch (err) {\n\n        // I love you so much IE\n\n        if (err && err.message === 'Call was rejected by callee.\\r\\n') {\n            return false;\n        }\n\n        return true;\n    }\n\n    if (allowMock && isSameDomain(win)) {\n        try {\n            if (win.mockclosed) {\n                return true;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    // Mobile safari\n\n    try {\n        if (!win.parent || !win.top) {\n            return true;\n        }\n    } catch (err) {}\n    // pass\n\n\n    // IE orphaned frame\n\n    try {\n        if (iframeWindows.has(win)) {\n            var frame = iframeWindows.get(win);\n\n            if (frame) {\n                if (!frame.contentWindow) {\n                    return true;\n                }\n\n                if (!frame.parentNode) {\n                    return true;\n                }\n\n                var doc = frame.ownerDocument;\n\n                if (doc && doc.body && !doc.body.contains(frame)) {\n                    return true;\n                }\n            }\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nfunction getUserAgent(win) {\n    win = win || window;\n    return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\nfunction getFrameByName(win, name) {\n\n    var winFrames = getFrames(win);\n\n    for (var _iterator6 = winFrames, _isArray6 = Array.isArray(_iterator6), _i7 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {\n        var _ref6;\n\n        if (_isArray6) {\n            if (_i7 >= _iterator6.length) break;\n            _ref6 = _iterator6[_i7++];\n        } else {\n            _i7 = _iterator6.next();\n            if (_i7.done) break;\n            _ref6 = _i7.value;\n        }\n\n        var childFrame = _ref6;\n\n        try {\n            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n                return childFrame;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    try {\n        if (winFrames.indexOf(win.frames[name]) !== -1) {\n            return win.frames[name];\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (winFrames.indexOf(win[name]) !== -1) {\n            return win[name];\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nfunction findChildFrameByName(win, name) {\n\n    var frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    for (var _iterator7 = getFrames(win), _isArray7 = Array.isArray(_iterator7), _i8 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {\n        var _ref7;\n\n        if (_isArray7) {\n            if (_i8 >= _iterator7.length) break;\n            _ref7 = _iterator7[_i8++];\n        } else {\n            _i8 = _iterator7.next();\n            if (_i8.done) break;\n            _ref7 = _i8.value;\n        }\n\n        var childFrame = _ref7;\n\n        var namedFrame = findChildFrameByName(childFrame, name);\n\n        if (namedFrame) {\n            return namedFrame;\n        }\n    }\n}\n\nfunction findFrameByName(win, name) {\n\n    var frame = void 0;\n\n    frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    return findChildFrameByName(getTop(win), name);\n}\n\nfunction isParent(win, frame) {\n\n    var frameParent = getParent(frame);\n\n    if (frameParent) {\n        return frameParent === win;\n    }\n\n    for (var _iterator8 = getFrames(win), _isArray8 = Array.isArray(_iterator8), _i9 = 0, _iterator8 = _isArray8 ? _iterator8 : _iterator8[Symbol.iterator]();;) {\n        var _ref8;\n\n        if (_isArray8) {\n            if (_i9 >= _iterator8.length) break;\n            _ref8 = _iterator8[_i9++];\n        } else {\n            _i9 = _iterator8.next();\n            if (_i9.done) break;\n            _ref8 = _i9.value;\n        }\n\n        var childFrame = _ref8;\n\n        if (childFrame === frame) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction isOpener(parent, child) {\n\n    return parent === getOpener(child);\n}\n\nfunction getAncestor(win) {\n    win = win || window;\n\n    var opener = getOpener(win);\n\n    if (opener) {\n        return opener;\n    }\n\n    var parent = getParent(win);\n\n    if (parent) {\n        return parent;\n    }\n}\n\nfunction getAncestors(win) {\n\n    var results = [];\n\n    var ancestor = win;\n\n    while (ancestor) {\n        ancestor = getAncestor(ancestor);\n        if (ancestor) {\n            results.push(ancestor);\n        }\n    }\n\n    return results;\n}\n\nfunction isAncestor(parent, child) {\n\n    var actualParent = getAncestor(child);\n\n    if (actualParent) {\n        if (actualParent === parent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    if (child === parent) {\n        return false;\n    }\n\n    if (getTop(child) === child) {\n        return false;\n    }\n\n    for (var _iterator9 = getFrames(parent), _isArray9 = Array.isArray(_iterator9), _i10 = 0, _iterator9 = _isArray9 ? _iterator9 : _iterator9[Symbol.iterator]();;) {\n        var _ref9;\n\n        if (_isArray9) {\n            if (_i10 >= _iterator9.length) break;\n            _ref9 = _iterator9[_i10++];\n        } else {\n            _i10 = _iterator9.next();\n            if (_i10.done) break;\n            _ref9 = _i10.value;\n        }\n\n        var frame = _ref9;\n\n        if (frame === child) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction isPopup() {\n    return Boolean(getOpener(window));\n}\n\nfunction isIframe() {\n    return Boolean(getParent(window));\n}\n\nfunction isFullpage() {\n    return Boolean(!isIframe() && !isPopup());\n}\n\nfunction anyMatch(collection1, collection2) {\n\n    for (var _iterator10 = collection1, _isArray10 = Array.isArray(_iterator10), _i11 = 0, _iterator10 = _isArray10 ? _iterator10 : _iterator10[Symbol.iterator]();;) {\n        var _ref10;\n\n        if (_isArray10) {\n            if (_i11 >= _iterator10.length) break;\n            _ref10 = _iterator10[_i11++];\n        } else {\n            _i11 = _iterator10.next();\n            if (_i11.done) break;\n            _ref10 = _i11.value;\n        }\n\n        var item1 = _ref10;\n\n        for (var _iterator11 = collection2, _isArray11 = Array.isArray(_iterator11), _i12 = 0, _iterator11 = _isArray11 ? _iterator11 : _iterator11[Symbol.iterator]();;) {\n            var _ref11;\n\n            if (_isArray11) {\n                if (_i12 >= _iterator11.length) break;\n                _ref11 = _iterator11[_i12++];\n            } else {\n                _i12 = _iterator11.next();\n                if (_i12.done) break;\n                _ref11 = _i12.value;\n            }\n\n            var item2 = _ref11;\n\n            if (item1 === item2) {\n                return true;\n            }\n        }\n    }\n}\n\nfunction getDistanceFromTop() {\n    var win = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n\n    var distance = 0;\n\n    while (win) {\n        win = getParent(win);\n        if (win) {\n            distance += 1;\n        }\n    }\n\n    return distance;\n}\n\nfunction getNthParent(win) {\n    var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    for (var i = 0; i < n; i++) {\n        win = getParent(win);\n    }\n    return win;\n}\n\nfunction getNthParentFromTop(win) {\n    var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    return getNthParent(win, getDistanceFromTop(win) - n);\n}\n\nfunction isSameTopWindow(win1, win2) {\n\n    var top1 = getTop(win1);\n    var top2 = getTop(win2);\n\n    try {\n        if (top1 && top2) {\n            if (top1 === top2) {\n                return true;\n            }\n\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    var allFrames1 = getAllFramesInWindow(win1);\n    var allFrames2 = getAllFramesInWindow(win2);\n\n    if (anyMatch(allFrames1, allFrames2)) {\n        return true;\n    }\n\n    var opener1 = getOpener(top1);\n    var opener2 = getOpener(top2);\n\n    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n        return false;\n    }\n\n    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n        return false;\n    }\n}\n\nfunction matchDomain(pattern, origin) {\n\n    if (typeof pattern === 'string') {\n\n        if (typeof origin === 'string') {\n            return pattern === CONSTANTS.WILDCARD || origin === pattern;\n        }\n\n        if ((0, _util.isRegex)(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n    }\n\n    if ((0, _util.isRegex)(pattern)) {\n\n        if ((0, _util.isRegex)(origin)) {\n            return pattern.toString() === origin.toString();\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        return Boolean(origin.match(pattern));\n    }\n\n    if (Array.isArray(pattern)) {\n\n        if (Array.isArray(origin)) {\n            return JSON.stringify(pattern) === JSON.stringify(origin);\n        }\n\n        if ((0, _util.isRegex)(origin)) {\n            return false;\n        }\n\n        return pattern.some(function (subpattern) {\n            return matchDomain(subpattern, origin);\n        });\n    }\n\n    return false;\n}\n\nfunction getDomainFromUrl(url) {\n\n    var domain = void 0;\n\n    if (url.match(/^(https?|mock|file):\\/\\//)) {\n        domain = url;\n    } else {\n        return getDomain();\n    }\n\n    domain = domain.split('/').slice(0, 3).join('/');\n\n    return domain;\n}\n\nvar closeWindowPromises = new _src.WeakMap();\n\nfunction onCloseWindow(win) {\n    var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n\n\n    var promise = closeWindowPromises.get(win);\n\n    if (promise) {\n        return promise;\n    }\n\n    promise = new _src2.ZalgoPromise(function (resolve) {\n\n        var check = function check() {\n            if (isWindowClosed(win)) {\n                return resolve();\n            }\n\n            setTimeout(check, delay);\n        };\n\n        check();\n    });\n\n    closeWindowPromises.set(win, promise);\n\n    return promise;\n}\n\n/***/ }),\n\n/***/ \"./src/util.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isRegex = isRegex;\nfunction isRegex(item) {\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// cross-domain-utils.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4fd4aaae6d6da663c31a","/* @flow */\n\nimport * as INTERFACE from './interface';\nexport * from './interface';\nexport default INTERFACE;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/cross-domain-safe-weakmap/src/index.js","/* @flow */\n\nexport { CrossDomainSafeWeakMap as WeakMap } from './weakmap';\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/cross-domain-safe-weakmap/src/interface.js","/* @flow */\n\nexport function hasNativeWeakMap() {\n\n    if (!window.WeakMap) {\n        return false;\n    }\n\n    if (!window.Object.freeze) {\n        return false;\n    }\n\n    try {\n\n        let testWeakMap = new window.WeakMap();\n        let testKey = {};\n        let testValue = '__testvalue__';\n\n        window.Object.freeze(testKey);\n\n        testWeakMap.set(testKey, testValue);\n\n        if (testWeakMap.get(testKey) === testValue) {\n            return true;\n        }\n\n        return false;\n\n    } catch (err) {\n\n        return false;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/cross-domain-safe-weakmap/src/native.js","/* @flow */\n\nexport function isWindow(obj : Object) {\n\n    try {\n        if (obj && obj.self === obj) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isClosedWindow(obj : Object) {\n\n    try {\n        if (obj && obj !== window && obj.closed) {\n            return true;\n        }\n    } catch (err) {\n\n        if (err && err.message === 'Call was rejected by callee.\\r\\n') {\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/cross-domain-safe-weakmap/src/util.js","/* @flow */\n\nimport { isWindow, isClosedWindow } from './util';\nimport { hasNativeWeakMap } from './native';\n\nlet defineProperty = Object.defineProperty;\nlet counter = Date.now() % 1e9;\n\nexport class CrossDomainSafeWeakMap<K : Object, V : mixed> {\n\n    name : string\n    weakmap : WeakMap<K, V>\n    keys : Array<K>\n    values : Array<V>\n\n    constructor() {\n        counter += 1;\n        this.name = `__weakmap_${Math.random() * 1e9 >>> 0}__${counter}`; // eslint-disable-line\n\n        if (hasNativeWeakMap()) {\n            try {\n                this.weakmap = new window.WeakMap();\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this.keys  = [];\n        this.values = [];\n    }\n\n    _cleanupClosedWindows() {\n\n        let weakmap = this.weakmap;\n        let keys = this.keys;\n\n        for (let i = 0; i < keys.length; i++) {\n            let value = keys[i];\n\n            if (isClosedWindow(value)) {\n\n                if (weakmap) {\n                    try {\n                        weakmap.delete(value);\n                    } catch (err) {\n                        // pass\n                    }\n                }\n\n                keys.splice(i, 1);\n                this.values.splice(i, 1);\n\n                i -= 1;\n            }\n        }\n    }\n\n    set(key : K, value : V) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        let weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.set(key, value);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (isWindow(key)) {\n\n            this._cleanupClosedWindows();\n\n            let keys = this.keys;\n            let values = this.values;\n            let index = keys.indexOf(key);\n\n            if (index === -1) {\n                keys.push(key);\n                values.push(value);\n            } else {\n                values[index] = value;\n            }\n\n        } else {\n\n            let name = this.name;\n            let entry = key[name];\n\n            if (entry && entry[0] === key) {\n                entry[1] = value;\n            } else {\n                defineProperty(key, name, {\n                    value: [ key, value ],\n                    writable: true\n                });\n            }\n        }\n    }\n\n    get(key : K) : V | void {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        let weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return weakmap.get(key);\n                }\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (isWindow(key)) {\n\n            let keys = this.keys;\n            let index = keys.indexOf(key);\n\n            if (index === -1) {\n                return;\n            }\n\n            return this.values[index];\n\n        } else {\n\n            let entry = key[this.name];\n\n            if (entry && entry[0] === key) {\n                return entry[1];\n            }\n        }\n    }\n\n    delete(key : K) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        let weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.delete(key);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (isWindow(key)) {\n\n            this._cleanupClosedWindows();\n\n            let keys = this.keys;\n            let index = keys.indexOf(key);\n\n            if (index !== -1) {\n                keys.splice(index, 1);\n                this.values.splice(index, 1);\n            }\n\n        } else {\n\n            let entry = key[this.name];\n\n            if (entry && entry[0] === key) {\n                entry[0] = entry[1] = undefined;\n            }\n        }\n    }\n\n    has(key : K) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        let weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                return weakmap.has(key);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (isWindow(key)) {\n\n            this._cleanupClosedWindows();\n\n            return this.keys.indexOf(key) !== -1;\n\n        } else {\n\n            let entry = key[this.name];\n\n            if (entry && entry[0] === key) {\n                return true;\n            }\n\n            return false;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/cross-domain-safe-weakmap/src/weakmap.js","\nlet possiblyUnhandledPromiseHandlers = [];\nlet dispatchedErrors = [];\n\nexport function dispatchPossiblyUnhandledError(err) {\n\n    if (dispatchedErrors.indexOf(err) !== -1) {\n        return;\n    }\n\n    dispatchedErrors.push(err);\n\n    setTimeout(() => {\n        throw err;\n    }, 1);\n\n    for (let j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n        possiblyUnhandledPromiseHandlers[j](err);\n    }\n}\n\nexport function onPossiblyUnhandledException(handler) {\n    possiblyUnhandledPromiseHandlers.push(handler);\n\n    return {\n        cancel() {\n            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/zalgo-promise/src/exceptions.js","/* @flow */\n\nexport { ZalgoPromise } from './promise';\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/zalgo-promise/src/index.js","/* @flow */\n\nimport { isPromise } from './utils';\nimport { onPossiblyUnhandledException, dispatchPossiblyUnhandledError } from './exceptions';\n\nexport class ZalgoPromise<R : mixed> {\n\n    resolved : boolean\n    rejected : boolean\n    errorHandled : boolean\n    value : R\n    error : mixed\n    handlers : Array<{\n        promise : ZalgoPromise<*>,\n        onSuccess : void | (result : R) => mixed,\n        onError : void | (error : mixed) => mixed\n    }>\n    dispatching : boolean\n\n    constructor(handler : ?(resolve : (result : R) => void, reject : (error : mixed) => void) => void) {\n\n        this.resolved = false;\n        this.rejected = false;\n        this.errorHandled = false;\n\n        this.handlers = [];\n\n        if (handler) {\n\n            let result;\n            let error;\n            let resolved = false;\n            let rejected = false;\n            let isAsync = false;\n\n            try {\n                handler(res => {\n                    if (isAsync) {\n                        this.resolve(res);\n                    } else {\n                        resolved = true;\n                        result = res;\n                    }\n\n                }, err => {\n                    if (isAsync) {\n                        this.reject(err);\n                    } else {\n                        rejected = true;\n                        error = err;\n                    }\n                });\n\n            } catch (err) {\n                this.reject(err);\n                return;\n            }\n\n            isAsync = true;\n\n            if (resolved) {\n                // $FlowFixMe\n                this.resolve(result);\n            } else if (rejected) {\n                this.reject(error);\n            }\n        }\n    }\n\n    resolve(result : R) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(result)) {\n            throw new Error('Can not resolve promise with another promise');\n        }\n\n        this.resolved = true;\n        this.value = result;\n        this.dispatch();\n\n        return this;\n    }\n\n    reject(error : mixed) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(error)) {\n            throw new Error('Can not reject promise with another promise');\n        }\n\n        if (!error) {\n            let err = (error && typeof error.toString === 'function' ? error.toString() : Object.prototype.toString.call(error));\n            error = new Error(`Expected reject to be called with Error, got ${err}`);\n        }\n\n        this.rejected = true;\n        this.error = error;\n\n        if (!this.errorHandled) {\n            setTimeout(() => {\n                if (!this.errorHandled) {\n                    dispatchPossiblyUnhandledError(error);\n                }\n            }, 1);\n        }\n\n        this.dispatch();\n\n        return this;\n    }\n\n    asyncReject(error : mixed) {\n        this.errorHandled = true;\n        this.reject(error);\n    }\n\n    dispatch() {\n\n        let { dispatching, resolved, rejected, handlers } = this;\n\n        if (dispatching) {\n            return;\n        }\n\n        if (!resolved && !rejected) {\n            return;\n        }\n\n        this.dispatching = true;\n\n        for (let i = 0; i < handlers.length; i++) {\n\n            let { onSuccess, onError, promise } = handlers[i];\n\n            let result;\n\n            if (resolved) {\n\n                try {\n                    result = onSuccess ? onSuccess(this.value) : this.value;\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n\n            } else if (rejected) {\n\n                if (!onError) {\n                    promise.reject(this.error);\n                    continue;\n                }\n\n                try {\n                    result = onError(this.error);\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n            }\n\n            if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n\n                if (result.resolved) {\n                    promise.resolve(result.value);\n                } else {\n                    promise.reject(result.error);\n                }\n\n                result.errorHandled = true;\n\n            } else if (isPromise(result)) {\n\n                // $FlowFixMe\n                result.then(res => { promise.resolve(res); },\n                            err => { promise.reject(err);  });\n\n            } else {\n\n                promise.resolve(result);\n            }\n        }\n\n        handlers.length = 0;\n        this.dispatching = false;\n    }\n\n    then<X : mixed>(onSuccess : void | (result : R) => X | ZalgoPromise<X>, onError : void | (error : mixed) => mixed) : ZalgoPromise<X> {\n\n        if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n            throw new Error('Promise.then expected a function for success handler');\n        }\n\n        if (onError && typeof onError !== 'function' && !onError.call) {\n            throw new Error('Promise.then expected a function for error handler');\n        }\n\n        let promise : ZalgoPromise<X> = new ZalgoPromise();\n\n        this.handlers.push({\n            promise,\n            onSuccess,\n            onError\n        });\n\n        this.errorHandled = true;\n\n        this.dispatch();\n\n        return promise;\n    }\n\n    catch(onError : (error : mixed) => mixed) : ZalgoPromise<R> {\n        return this.then(undefined, onError);\n    }\n\n    finally(handler : () => mixed) {\n        return this.then((result) => {\n            return ZalgoPromise.try(handler)\n                .then(() => {\n                    return result;\n                });\n        }, (err) => {\n            return ZalgoPromise.try(handler)\n                .then(() => {\n                    throw err;\n                });\n        });\n    }\n\n    toPromise() : Promise<R> {\n        if (!window.Promise) {\n            throw new Error(`Could not find window.Promise`);\n        }\n        return window.Promise.resolve(this);\n    }\n\n    static resolve<X : mixed>(value : X | ZalgoPromise<X>) : ZalgoPromise<X> {\n\n        if (value instanceof ZalgoPromise || isPromise(value)) {\n            // $FlowFixMe\n            return value;\n        }\n\n        return new ZalgoPromise().resolve(value);\n    }\n\n    static reject(error : mixed) : ZalgoPromise<R> {\n        return new ZalgoPromise().reject(error);\n    }\n\n    static all<Y : mixed>(promises : Array<Y | ZalgoPromise<Y>>) : ZalgoPromise<Array<Y>> {\n\n        let promise : ZalgoPromise<Array<Y>> = new ZalgoPromise();\n        let count = promises.length;\n        let results : Array<Y> = [];\n\n        if (!count) {\n            promise.resolve(results);\n            return promise;\n        }\n\n        for (let i = 0; i < promises.length; i++) {\n            ZalgoPromise.resolve(promises[i]).then(result => {\n                // $FlowFixMe\n                results[i] = result;\n                count -= 1;\n                if (count === 0) {\n                    promise.resolve(results);\n                }\n            }, err => {\n                promise.reject(err);\n            });\n        }\n\n        return promise;\n    }\n\n    static onPossiblyUnhandledException(handler : (err : mixed) => mixed) : { cancel : () => void } {\n        return onPossiblyUnhandledException(handler);\n    }\n\n    static try(method : () => mixed, context : ?mixed, args : ?Array<mixed>) {\n\n        let result;\n\n        try {\n            result = method.apply(context, args || []);\n        } catch (err) {\n            return ZalgoPromise.reject(err);\n        }\n\n        return ZalgoPromise.resolve(result);\n    }\n\n    static delay(delay : number) : ZalgoPromise<void> {\n        return new ZalgoPromise(resolve => {\n            setTimeout(resolve, delay);\n        });\n    }\n\n    static hash<X : mixed>(obj : { [string] : X | ZalgoPromise<X> }) : ZalgoPromise<{ [string] : X }> {\n\n        let results = {};\n        let promises = [];\n\n        for (let key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                promises.push(ZalgoPromise.resolve(obj[key]).then(result => {\n                    results[key] = result;\n                }));\n            }\n        }\n\n        return ZalgoPromise.all(promises).then(() => {\n            return results;\n        });\n    }\n}\n\nlet prom : ZalgoPromise<mixed> = new ZalgoPromise();\n\nprom.resolve(undefined);\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/zalgo-promise/src/promise.js","\nlet toString = ({}).toString;\n\nexport function isPromise(item) {\n    try {\n        if (!item) {\n            return false;\n        }\n\n        if (window.Window && item instanceof window.Window) {\n            return false;\n        }\n\n        if (window.constructor && item instanceof window.constructor) {\n            return false;\n        }\n\n        if (toString) {\n            let name = toString.call(item);\n\n            if (name === '[object Window]' || name === '[object global]' || name === '[object DOMWindow]') {\n                return false;\n            }\n        }\n\n        if (item && item.then instanceof Function) {\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n\n    return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/zalgo-promise/src/utils.js","// @flow\n\nimport { WeakMap } from 'cross-domain-safe-weakmap/src';\nimport { ZalgoPromise } from 'zalgo-promise/src';\nimport { isRegex } from './util';\n\nconst CONSTANTS = {\n    MOCK_PROTOCOL: 'mock:',\n    FILE_PROTOCOL: 'file:',\n    WILDCARD: '*'\n};\n\nexport function getActualDomain(win : any) {\n\n    let location = win.location;\n\n    if (!location) {\n        throw new Error(`Can not read window location`);\n    }\n\n    let protocol = location.protocol;\n\n    if (!protocol) {\n        throw new Error(`Can not read window protocol`);\n    }\n\n    if (protocol === CONSTANTS.FILE_PROTOCOL) {\n        return 'file://';\n    }\n\n    let host = location.host;\n\n    if (!host) {\n        throw new Error(`Can not read window host`);\n    }\n\n    return `${protocol}//${host}`;\n}\n\nexport function getDomain(win : any) {\n\n    win = win || window;\n\n    let domain = getActualDomain(win);\n\n    if (domain && win.mockDomain && win.mockDomain.indexOf(CONSTANTS.MOCK_PROTOCOL) === 0) {\n        return win.mockDomain;\n    }\n\n    return domain;\n}\n\nexport function isBlankDomain(win : any) {\n    try {\n        if (!win.location.href) {\n            return true;\n        }\n\n        if (win.location.href === 'about:blank') {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isActuallySameDomain(win : any) {\n\n    try {\n        let desc = Object.getOwnPropertyDescriptor(win, 'location');\n\n        if (desc && desc.enumerable === false) {\n            return false;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isBlankDomain(win)) {\n            return true;\n        }\n\n        if (getActualDomain(win) === getActualDomain(window)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isSameDomain(win : any) {\n\n    if (!isActuallySameDomain(win)) {\n        return false;\n    }\n\n    try {\n\n        if (isBlankDomain(win)) {\n            return true;\n        }\n\n        if (getDomain(window) === getDomain(win)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function getParent(win : any) {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.parent && win.parent !== win) {\n            return win.parent;\n        }\n    } catch (err) {\n        return;\n    }\n}\n\nexport function getOpener(win : any) {\n\n    if (!win) {\n        return;\n    }\n\n    // Make sure we're not actually an iframe which has had window.open() called on us\n    if (getParent(win)) {\n        return;\n    }\n\n    try {\n        return win.opener;\n    } catch (err) {\n        return;\n    }\n}\n\n\n\nexport function getParents(win : any) {\n\n    let result = [];\n\n    try {\n\n        while (win.parent !== win) {\n            result.push(win.parent);\n            win = win.parent;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return result;\n}\n\nexport function isAncestorParent(parent : any, child : any) {\n\n    if (!parent || !child) {\n        return false;\n    }\n\n    let childParent = getParent(child);\n\n    if (childParent) {\n        return childParent === parent;\n    }\n\n    if (getParents(child).indexOf(parent) !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getFrames(win : any) {\n\n    let result = [];\n\n    let frames;\n\n    try {\n        frames = win.frames;\n    } catch (err) {\n        frames = win;\n    }\n\n    let len;\n\n    try {\n        len = frames.length;\n    } catch (err) {\n        // pass\n    }\n\n    if (len === 0) {\n        return result;\n    }\n\n    if (len) {\n        for (let i = 0; i < len; i++) {\n\n            let frame;\n\n            try {\n                frame = frames[i];\n            } catch (err) {\n                continue;\n            }\n\n            result.push(frame);\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < 100; i++) {\n        let frame;\n\n        try {\n            frame = frames[i];\n        } catch (err) {\n            return result;\n        }\n\n        if (!frame) {\n            return result;\n        }\n\n        result.push(frame);\n    }\n\n    return result;\n}\n\n\nexport function getAllChildFrames(win : any) {\n\n    let result = [];\n\n    for (let frame of getFrames(win)) {\n        result.push(frame);\n\n        for (let childFrame of getAllChildFrames(frame)) {\n            result.push(childFrame);\n        }\n    }\n\n    return result;\n}\n\nexport function getAllFramesInWindow(win : any) {\n\n    let result = getAllChildFrames(win);\n\n    result.push(win);\n\n    for (let parent of getParents(win)) {\n\n        result.push(parent);\n\n        for (let frame of getFrames(parent)) {\n\n            if (result.indexOf(frame) === -1) {\n                result.push(frame);\n            }\n        }\n    }\n\n    return result;\n}\n\nexport function getTop(win : any) {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.top) {\n            return win.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    if (getParent(win) === win) {\n        return win;\n    }\n\n    try {\n        if (isAncestorParent(window, win)) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isAncestorParent(win, window)) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    for (let frame of getAllChildFrames(win)) {\n        try {\n            if (frame.top) {\n                return frame.top;\n            }\n        } catch (err) {\n            // pass\n        }\n\n        if (getParent(frame) === frame) {\n            return frame;\n        }\n    }\n}\n\nexport function isTop(win : any) : boolean {\n    return win === getTop(win);\n}\n\nlet iframeWindows : WeakMap<any, HTMLIFrameElement> = new WeakMap();\n\nexport function linkFrameWindow(frame : HTMLIFrameElement) {\n    if (frame && frame.contentWindow) {\n        try {\n            iframeWindows.set(frame.contentWindow, frame);\n        } catch (err) {\n            // pass\n        }\n    }\n}\n\nexport function isWindowClosed(win : any, allowMock : boolean = true) {\n\n    try {\n        if (win === window) {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n\n\n    try {\n        if (!win) {\n            return true;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (win.closed) {\n            return true;\n        }\n\n    } catch (err) {\n\n        // I love you so much IE\n\n        if (err && err.message === 'Call was rejected by callee.\\r\\n') {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    if (allowMock && isSameDomain(win)) {\n        try {\n            if (win.mockclosed) {\n                return true;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    // Mobile safari\n\n    try {\n        if (!win.parent || !win.top) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    // IE orphaned frame\n\n    try {\n        if (iframeWindows.has(win)) {\n            let frame = iframeWindows.get(win);\n\n            if (frame) {\n                if (!frame.contentWindow) {\n                    return true;\n                }\n\n                if (!frame.parentNode) {\n                    return true;\n                }\n\n                let doc = frame.ownerDocument;\n\n                if (doc && doc.body && !doc.body.contains(frame)) {\n                    return true;\n                }\n            }\n        }\n    } catch (err) {\n        // pass\n    }\n\n\n    return false;\n}\n\nexport function getUserAgent(win : any) {\n    win = win || window;\n    return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\n\nexport function getFrameByName(win : any, name : string) {\n\n    let winFrames = getFrames(win);\n\n    for (let childFrame of winFrames) {\n        try {\n            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n                return childFrame;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    try {\n        if (winFrames.indexOf(win.frames[name]) !== -1) {\n            return win.frames[name];\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (winFrames.indexOf(win[name]) !== -1) {\n            return win[name];\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function findChildFrameByName(win : any, name : string) {\n\n    let frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        let namedFrame = findChildFrameByName(childFrame, name);\n\n        if (namedFrame) {\n            return namedFrame;\n        }\n    }\n}\n\nexport function findFrameByName(win : any, name : string) {\n\n    let frame;\n\n    frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    return findChildFrameByName(getTop(win), name);\n}\n\nexport function isParent(win : any, frame : any) {\n\n    let frameParent = getParent(frame);\n\n    if (frameParent) {\n        return frameParent === win;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        if (childFrame === frame) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isOpener(parent : any, child : any) {\n\n    return parent === getOpener(child);\n}\n\nexport function getAncestor(win : any) {\n    win = win || window;\n\n    let opener = getOpener(win);\n\n    if (opener) {\n        return opener;\n    }\n\n    let parent = getParent(win);\n\n    if (parent) {\n        return parent;\n    }\n}\n\nexport function getAncestors(win : any) {\n\n    let results = [];\n\n    let ancestor = win;\n\n    while (ancestor) {\n        ancestor = getAncestor(ancestor);\n        if (ancestor) {\n            results.push(ancestor);\n        }\n    }\n\n    return results;\n}\n\n\nexport function isAncestor(parent : any, child : any) {\n\n    let actualParent = getAncestor(child);\n\n    if (actualParent) {\n        if (actualParent === parent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    if (child === parent) {\n        return false;\n    }\n\n    if (getTop(child) === child) {\n        return false;\n    }\n\n    for (let frame of getFrames(parent)) {\n        if (frame === child) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isPopup() {\n    return Boolean(getOpener(window));\n}\n\nexport function isIframe() {\n    return Boolean(getParent(window));\n}\n\nexport function isFullpage() {\n    return Boolean(!isIframe() && !isPopup());\n}\n\nfunction anyMatch(collection1, collection2) {\n\n    for (let item1 of collection1) {\n        for (let item2 of collection2) {\n            if (item1 === item2) {\n                return true;\n            }\n        }\n    }\n}\n\nexport function getDistanceFromTop(win : any = window) {\n    let distance = 0;\n\n    while (win) {\n        win = getParent(win);\n        if (win) {\n            distance += 1;\n        }\n    }\n\n    return distance;\n}\n\nexport function getNthParent(win : any, n : number = 1) {\n    for (let i = 0; i < n; i++) {\n        win = getParent(win);\n    }\n    return win;\n}\n\nexport function getNthParentFromTop(win : any, n : number = 1) {\n    return getNthParent(win, getDistanceFromTop(win) - n);\n}\n\nexport function isSameTopWindow(win1 : any, win2 : any) {\n\n    let top1 = getTop(win1);\n    let top2 = getTop(win2);\n\n    try {\n        if (top1 && top2) {\n            if (top1 === top2) {\n                return true;\n            }\n\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    let allFrames1 = getAllFramesInWindow(win1);\n    let allFrames2 = getAllFramesInWindow(win2);\n\n    if (anyMatch(allFrames1, allFrames2)) {\n        return true;\n    }\n\n    let opener1 = getOpener(top1);\n    let opener2 = getOpener(top2);\n\n    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n        return false;\n    }\n\n    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n        return false;\n    }\n}\n\nexport function matchDomain(pattern : any, origin : any) {\n\n    if (typeof pattern === 'string') {\n\n        if (typeof origin === 'string') {\n            return pattern === CONSTANTS.WILDCARD || origin === pattern;\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n    }\n\n    if (isRegex(pattern)) {\n\n        if (isRegex(origin)) {\n            return pattern.toString() === origin.toString();\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        return Boolean(origin.match(pattern));\n    }\n\n    if (Array.isArray(pattern)) {\n\n        if (Array.isArray(origin)) {\n            return JSON.stringify(pattern) === JSON.stringify(origin);\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        return pattern.some(subpattern => matchDomain(subpattern, origin));\n    }\n\n    return false;\n}\n\nexport function getDomainFromUrl(url : string) {\n\n    let domain;\n\n    if (url.match(/^(https?|mock|file):\\/\\//)) {\n        domain = url;\n    } else {\n        return getDomain();\n    }\n\n    domain = domain.split('/').slice(0, 3).join('/');\n\n    return domain;\n}\n\nlet closeWindowPromises : WeakMap<any, ZalgoPromise<void>> = new WeakMap();\n\nexport function onCloseWindow(win : any, delay : number = 1000) : ZalgoPromise<void> {\n\n    let promise = closeWindowPromises.get(win);\n\n    if (promise) {\n        return promise;\n    }\n\n    promise = new ZalgoPromise(resolve => {\n\n        let check = () => {\n            if (isWindowClosed(win)) {\n                return resolve();\n            }\n\n            setTimeout(check, delay);\n        };\n\n        check();\n    });\n\n    closeWindowPromises.set(win, promise);\n\n    return promise;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// @flow\n\nexport function isRegex(item : any) {\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js"],"sourceRoot":""}